<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Login | Flosendo Feedback Copilot</title>
  <link rel="stylesheet" href="/static/css/styles.css" />
</head>
<body>
  <div class="card">
    <div class="card-header">Login</div>
    <p class="text-muted text-small mt-12">
  Use your assigned email and password to sign in.
</p>


    <form id="loginForm">
      <label>Email</label><br />
      <input type="email" id="email" required /><br /><br />

      <label>Password</label><br />
      <input type="password" id="password" required /><br /><br />

      <button type="submit">Sign in</button>
    </form>

    <p id="message"></p>

    <p style="margin-top: 12px;">
      <a class="btn" href="/">Back to home</a>
    </p>
    <hr class="mt-20" />

<div class="card" style="max-width:520px; margin: 24px auto;">
  <div class="card-header">Forgot password</div>
  <p class="text-muted text-small">Enter your email and weâ€™ll generate a reset link (prototype mode).</p>

  <input id="forgotEmail" type="email" placeholder="your@email.com" />
  <div class="mt-12"></div>
  <button id="forgotBtn" type="button" class="btn">Generate reset link</button>

  <p id="forgotMsg" class="text-muted mt-8"></p>
</div>

<script>
  document.getElementById("forgotBtn").addEventListener("click", async () => {
    const email = (document.getElementById("forgotEmail").value || "").trim();
    const msg = document.getElementById("forgotMsg");
    msg.textContent = "Generating...";

    const res = await fetch("/auth/forgot", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({ email })
    });

    const data = await res.json().catch(() => ({}));
    if (!res.ok) { msg.textContent = data.detail || "Failed."; return; }

    if (!data.reset_url) {
      msg.textContent = "If the email exists, a reset link would be generated.";
      return;
    }

    msg.innerHTML = `Reset link (prototype): <a href="${data.reset_url}">${data.reset_url}</a>`;
  });
</script>






  </div>


  <script src="/static/js/login.js"></script>

</body>
</html>
